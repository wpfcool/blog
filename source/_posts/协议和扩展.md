---
title: swift开发(五)协议和扩展
date: 2016-04-22 10:49:23
tags: [swift,IOS]
---

## 协议（protocol）
### 声明协议

使用protocol声明一个协议

```
protocol ExampleProtocol {
    var simpleDescription: String {get}
    mutating func adjust()
}

```
### 类，枚举和结构体都可实现协议
类实现协议

```
class SimpleClass: ExampleProtocol {
    var simpleDescription: String = "a very simple class"
    var anotherProperty: Int = 69105
    func adjust() {
        simpleDescription += " Now 100% adjust"
    }
}
var a = SimpleClass()
a.adjust()
let aDesc = a.simpleDescription

```
结构体实现协议

```
struct SimpleStruct: ExampleProtocol {
    var simpleDescription: String = "a very simple struct"
    mutating func adjust() {
        simpleDescription += " (adjusted)"
    }
}
var b = SimpleStruct()
b.adjust()
let bDesc = b.simpleDescription

```
枚举实现协议

```
enum SimpleEnum: ExampleProtocol {
    case First(String), Second(String)
    
    var simpleDescription: String {
        get {
            switch self {
            case let .First(text):
                return text
            case let .Second(text):
                return text

            }
        }
        set {
            switch self {
            case .First(_):
                self = .First(newValue)
            case .Second(_):
                self = .Second(newValue)

            }
        }
    }
    mutating func adjust() {
        switch self {
        case let .First(text):
            self = .First(text + " (first case adjusted)")
        case let .Second(text):
            self = .Second(text + " (second case adjusted)")
        }
    }
}

var c = SimpleEnum.First("123")
c.adjust()
c.simpleDescription

```
### mutating 关键字
在结构体中用关键字mutating 标记一个会修改结构体的方法，在类中不需要，因为在类中的方法总是在修改类

### 其他

你可以像使用其他命名类型一样，使用一个接口名称 ：例如，创建一个有不同类型但是都实现同一个接口的对象集合。当你处理接口类型的值时，接口外定义的方法不可用

```
let protocolValue: ExampleProtocol = a
protocolValue.simpleDescription
```
即使 protocolValue 变量在运行时的类型是 simpleClass，但是编译器会把它当做 ExampleProtocol 类型。这表示你不能调用实现此接口的类中的自有的方法或者属性。

## 扩展（extension）
### 声明扩展
使用extension在已存在的类型中添加方法，比如一个新的方法和计算属性。你可以使用extension为任意类型添加协议，甚至是冲外部库或framework中导入的类型

```
extension Int: ExampleProtocol{
    
    var simpleDescription:String {
        return "the number \(self)"
    }
    mutating func adjust() {
        self += 42
    }
}

7.simpleDescription
```

